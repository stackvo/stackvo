import{i as q,r as m,u as E,c as g,o as F,a as T,b as t,w as l,V as x,d as O,e as d,f as c,g as w,h,j as P,k as U,l as o,m as n,n as u,p as A,t as f,q as C,s as b,v as _,x as H,y as M,z as N,A as R,B as I,C as G,D as J}from"./index-Bvl2YYKn.js";const K={class:"pa-2"},Q={class:"font-weight-bold"},W={key:0},X=["href"],Y={class:"text-caption"},Z={class:"bg-grey-darken-3 pa-1"},ee={key:1,class:"text-grey"},le={class:"text-h6"},oe={__name:"Tools",setup(ae){const z=q("isNavigating",m(!1)),i=E(),p=m(""),r=m({}),v=m(!1),y=m(""),S=[{title:"Tool",key:"name",sortable:!0,align:"left"},{title:"Version",key:"version",sortable:!0,align:"center",width:"120"},{title:"URL",key:"url",sortable:!0,align:"left"},{title:"Open",key:"open",sortable:!1,align:"center",width:"100"},{title:"Status",key:"status",sortable:!0,align:"center",width:"150"}],k=g(()=>i.tools),B=g(()=>i.loading),D=g(()=>k.value.filter(s=>s.running).length),$=g(()=>k.value.length);async function L(s){v.value=!0,y.value=`Enabling ${s}... (This may take 2-5 minutes - container rebuild required)`,r.value[s]="enable";try{await i.enableTool(s),await i.loadTools()}catch(e){console.error("Failed to enable tool:",e)}finally{delete r.value[s],v.value=!1}}async function j(s){v.value=!0,y.value=`Disabling ${s}... (This may take 2-5 minutes - container rebuild required)`,r.value[s]="disable";try{await i.disableTool(s),await i.loadTools()}catch(e){console.error("Failed to disable tool:",e)}finally{delete r.value[s],v.value=!1}}return F(async()=>{await i.loadTools()}),(s,e)=>(d(),T("div",K,[t(x,{rounded:"0",elevation:"0"},{default:l(()=>[h(z)?(d(),c(P,{key:0,indeterminate:"",color:"success",height:"3",absolute:"",top:""})):w("",!0),t(U,{class:"d-flex align-center"},{default:l(()=>[t(u,{start:""},{default:l(()=>[...e[3]||(e[3]=[o("mdi-tools",-1)])]),_:1}),e[6]||(e[6]=o(" Tools ",-1)),t(A),n("p",null,f(D.value)+" / "+f($.value)+" Enabled",1),t(C,{vertical:"",class:"mx-2"}),t(b,{icon:"mdi-refresh",variant:"flat",onClick:e[0]||(e[0]=a=>h(i).loadTools())},{default:l(()=>[t(u,null,{default:l(()=>[...e[4]||(e[4]=[o("mdi-refresh",-1)])]),_:1}),t(_,{activator:"parent",location:"bottom"},{default:l(()=>[...e[5]||(e[5]=[o("Refresh Tools",-1)])]),_:1})]),_:1})]),_:1}),t(C),t(H,{class:"pa-0"},{default:l(()=>[t(M,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search tools...",class:"rounded-0","single-line":"","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),t(N,{headers:S,items:k.value,search:p.value,loading:B.value,"items-per-page":"-1",class:"elevation-0","fixed-header":"",hover:"",density:"compact","item-value":"name",striped:"even","hide-default-footer":"",style:{height:"calc(100vh - 235px)"}},{loading:l(()=>[t(G,{type:"table-row@20"})]),"item.name":l(({item:a})=>[n("div",Q,[t(u,{size:"small",class:"mr-2"},{default:l(()=>[...e[7]||(e[7]=[o("mdi-wrench",-1)])]),_:1}),o(" "+f(a.name),1)])]),"item.version":l(({item:a})=>[t(I,{size:"small",variant:"tonal",color:"info"},{default:l(()=>[o(f(a.version),1)]),_:2},1024)]),"item.url":l(({item:a})=>[a.url?(d(),T("div",W,[n("a",{href:a.url,target:"_blank",class:"text-decoration-none"},[t(u,{size:"small"},{default:l(()=>[...e[8]||(e[8]=[o("mdi-web",-1)])]),_:1}),o(" "+f(a.domain),1)],8,X),a.dns_configured?w("",!0):(d(),c(_,{key:0,location:"top"},{activator:l(({props:V})=>[t(u,R(V,{color:"warning",size:"small",class:"ml-2"}),{default:l(()=>[...e[9]||(e[9]=[o("mdi-alert-circle",-1)])]),_:1},16)]),default:l(()=>[n("div",Y,[e[10]||(e[10]=n("strong",null,"No Host DNS record found.",-1)),e[11]||(e[11]=n("br",null,null,-1)),e[12]||(e[12]=o(" Add the following to /etc/hosts:",-1)),e[13]||(e[13]=n("br",null,null,-1)),n("code",Z,"127.0.0.1 "+f(a.domain),1)])]),_:2},1024))])):(d(),T("span",ee,"-"))]),"item.status":l(({item:a})=>[a.enabled?(d(),c(b,{key:1,icon:"",size:"small",color:"orange-darken-2",variant:"tonal",onClick:V=>j(a.name),loading:r.value[a.name]==="disable",disabled:!!r.value[a.name]},{default:l(()=>[t(u,null,{default:l(()=>[...e[15]||(e[15]=[o("mdi-power-off",-1)])]),_:1})]),_:1},8,["onClick","loading","disabled"])):(d(),c(b,{key:0,icon:"",size:"small",color:"success",variant:"tonal",onClick:V=>L(a.name),loading:r.value[a.name]==="enable",disabled:!!r.value[a.name]},{default:l(()=>[t(u,null,{default:l(()=>[...e[14]||(e[14]=[o("mdi-power",-1)])]),_:1})]),_:1},8,["onClick","loading","disabled"]))]),"item.open":l(({item:a})=>[a.url&&a.enabled?(d(),c(b,{key:0,block:"",size:"small",color:"primary",variant:"tonal",href:a.url,target:"_blank"},{default:l(()=>[t(u,null,{default:l(()=>[...e[16]||(e[16]=[o("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["href"])):w("",!0)]),bottom:l(()=>[...e[17]||(e[17]=[])]),_:1},8,["items","search","loading"])]),_:1}),t(O,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=a=>v.value=a),class:"align-center justify-center",opacity:.8},{default:l(()=>[t(x,{class:"pa-8 text-center","min-width":"300"},{default:l(()=>[t(J,{indeterminate:"",size:"64",color:"primary",class:"mb-4"}),n("div",le,f(y.value),1)]),_:1})]),_:1},8,["modelValue"])]))}};export{oe as default};
