###################################################################
# STACKVO POSTGRES CONFIG TEMPLATE
###################################################################

#------------------------------------------------------------------------------
# CONNECTIONS AND AUTHENTICATION
#------------------------------------------------------------------------------

listen_addresses = '*'
port = 5432
max_connections = 200

#------------------------------------------------------------------------------
# MEMORY SETTINGS
#------------------------------------------------------------------------------

shared_buffers = 512MB
work_mem = 16MB
maintenance_work_mem = 128MB

#------------------------------------------------------------------------------
# CHECKPOINTS & WAL
#------------------------------------------------------------------------------

checkpoint_timeout = 10min
wal_buffers = 16MB
min_wal_size = 512MB
max_wal_size = 2GB

#------------------------------------------------------------------------------
# QUERY TUNING
#------------------------------------------------------------------------------

effective_cache_size = 1GB
random_page_cost = 1.1
cpu_tuple_cost = 0.03
cpu_index_tuple_cost = 0.005
cpu_operator_cost = 0.0025

#------------------------------------------------------------------------------
# LOGGING
#------------------------------------------------------------------------------

logging_collector = on
log_directory = 'log'
log_filename = 'postgresql.log'
log_statement = none
log_min_duration_statement = 500 # log slow queries
log_connections = on
log_disconnections = on

#------------------------------------------------------------------------------
# SSL (disabled by default, enable if required)
#------------------------------------------------------------------------------

ssl = off

#------------------------------------------------------------------------------
# CLIENT CONNECTION DEFAULTS
#------------------------------------------------------------------------------

client_encoding = 'UTF8'
standard_conforming_strings = on

#------------------------------------------------------------------------------
# AUTOVACUUM SETTINGS
#------------------------------------------------------------------------------

autovacuum = on
autovacuum_max_workers = 5
autovacuum_naptime = 60
